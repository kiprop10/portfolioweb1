<!-- ðŸ”„ Loading Spinner -->
<div class="svg-spinner-container" *ngIf="isLoading">
  <svg class="svg-spinner" viewBox="25 25 50 50">
    <circle class="spinner-path" cx="50" cy="50" r="20" fill="none" stroke-width="4" />
  </svg>
</div>

<!-- ðŸ“ Blog List -->
<div *ngFor="let blog of blogs" class="blog-card">
  <img *ngIf="blog.imageUrl" [src]="blog.imageUrl" alt="Blog Image" />
  <h2>{{ blog.title }}</h2>
  <span class="meta">Posted: {{ blog.createdAt | date:'medium' }}</span>

  <div class="blog-content">
    <!-- Collapsed View -->
    <ng-container *ngIf="!blog.expanded">
      <p>
        <!-- Show a short preview as plain text -->
        {{ blog.content.length > 200 ? (blog.content | slice: 0:200) + '...' : blog.content }}
      </p>
    </ng-container>

    <!-- Expanded View -->
    <ng-container *ngIf="blog.expanded">
      <div class="full-content" [innerHTML]="blog.safeContent"></div>
    </ng-container>
  </div>

  <!-- Toggle Buttons -->
  <button *ngIf="!blog.expanded" (click)="showDetail(blog)" class="read-more-btn">See More</button>
  <button *ngIf="blog.expanded" (click)="closeDetail(blog)" class="close-btn">Close</button>

  <!-- Comments Section -->
  <div *ngIf="blog.expanded" class="blog-detail">
    <h3>Comments</h3>
    <ul>
      <li *ngFor="let comment of blog.comments">
        <strong>{{ comment.author }}</strong>: {{ comment.text }}
        <span class="meta">{{ comment.createdAt | date:'short' }}</span>
      </li>
    </ul>
    <form (ngSubmit)="addComment(blog)">
      <input [(ngModel)]="blog.newCommentAuthor" name="author{{blog._id}}" placeholder="Your name" required />
      <input [(ngModel)]="blog.newCommentText" name="text{{blog._id}}" placeholder="Add a comment..." required />
      <button type="submit">Add Comment</button>
    </form>
  </div>
</div>